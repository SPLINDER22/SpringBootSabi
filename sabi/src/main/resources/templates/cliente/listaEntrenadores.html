<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="UTF-8">
    <title>Lista De Entrenadores</title>
</head>

<body th:replace="layout/layout :: layout('Lista de entrenadores', ~{::section})">
    <section th:fragment="section">
    <h1 class="h3 mb-4 text-dark text-center">Lista de Entrenadores</h1>

        <div class="container">
            <div class="row justify-content-center">
                <div th:if="${#lists.isEmpty(entrenadores)}" class="col-12 d-flex justify-content-center">
                    <div class="alert alert-info text-center w-50 mt-5" role="alert">
                        <strong>Aún no hay entrenadores disponibles</strong><br>
                        Cuando haya entrenadores, aquí se mostrarán.
                    </div>
                </div>
                <div th:each="entrenador, iterStat : ${entrenadores}" th:if="${!#lists.isEmpty(entrenadores)}" class="col-12 col-md-6 d-flex align-items-stretch mb-4">
                    <div class="card w-100 shadow-lg border-primary rounded-4 p-3 text-dark">
                        <div class="row g-3 align-items-center">
                            <div class="col-12 col-md-5">
                                <div class="rounded-start rounded-top overflow-hidden"
                                    style="position: relative; width: 100%; padding-top: 100%;">
                                    <img th:src="@{/img/entrenador.jpg}" alt="Foto de entrenador"
                                        th:alt="'Foto de ' + ${entrenador.nombre}"
                                        style="position: absolute; inset: 0; width: 100%; height: 100%; object-fit: cover;">
                                </div>
                            </div>
                            <div class="col-12 col-md-7">
                                <div class="card-body py-2 px-1">
                                    <h5 class="card-title mb-2" th:text="${entrenador.nombre}">Nombre</h5>

                                    <div class="row">
                                        <div class="col-12 col-sm-6">
                                            <p class="card-text mb-2"><strong>Especialidades:</strong> <span
                                                    th:text="${entrenador.especialidades}"></span></p>
                                        </div>
                                        <div class="col-12 col-sm-6">
                                            <p class="card-text mb-2"><strong>Años de Experiencia:</strong> <span
                                                    th:text="${entrenador.experiencia}"></span></p>
                                            <div class="d-flex align-items-center mb-1"
                                                th:with="full=${T(java.lang.Math).floor(entrenador.calificacionPromedio)},
                                                                                                    frac=${entrenador.calificacionPromedio - T(java.lang.Math).floor(entrenador.calificacionPromedio)}">
                                                <span class="me-2 small text-muted"
                                                    th:text="${#numbers.formatDecimal(entrenador.calificacionPromedio,1,1)}">0.0</span>
                                                <span th:each="i : ${#numbers.sequence(1,5)}" class="me-1">
                                                    <i class="fas fa-star text-warning" th:if="${i >= full}"></i>
                                                    <i class="fas fa-star-half-alt text-warning"
                                                        th:if="${i == full + 1 and frac >= 0.5}"></i>
                                                    <i class="far fa-star text-warning"
                                                        th:if="${!(i >= full) and !(i == full + 1 and frac >= 0.5)}"></i>
                                                </span>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="d-grid mt-2">
                                        <form
                                            th:action="@{/entrenadores/solicitar/{idEntrenador}(idEntrenador=${entrenador.id})}"
                                            method="post">
                                            <input type="hidden" th:name="${_csrf.parameterName}"
                                                th:value="${_csrf.token}" />
                                            <button type="submit" class="btn btn-primary">Solicitar</button>
                                        </form>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
</body>

</html>