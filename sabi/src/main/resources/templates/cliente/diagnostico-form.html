o<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Mi Diagnóstico</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" th:href="@{/css/diagnostico-form.css}">
</head>
<body th:replace="layout/layout :: layout('Mi Diagnóstico', ~{::section})">
<section th:fragment="section">
<div class="container py-4">
    <h2 class="mb-4">Mi Diagnóstico</h2>
    <form th:action="@{/diagnostico/crear}" method="post" class="needs-validation" novalidate>
         <!-- Obligatorios -->
        <div class="categoria">
            <div class="categoria-titulo">Datos físicos <span class="badge bg-danger">Obligatorio</span></div>
            <div class="row g-3 align-items-end">
                <div class="col-md-4">
                    <label for="peso" class="form-label">Peso (kg)</label>
                    <input type="number" step="0.1" min="30" max="300" class="form-control" id="peso" name="peso" th:value="${diagnosticoActual?.peso}" required placeholder="Ej: 70.5">
                    <small class="text-muted">Ingrese su peso actual en kilogramos.</small>
                    <div class="invalid-feedback">Este campo es obligatorio.</div>
                </div>
                <div class="col-md-4">
                    <label for="estatura" class="form-label">Estatura (cm)</label>
                    <input type="number" step="0.1" min="100" max="250" class="form-control" id="estatura" name="estatura" th:value="${diagnosticoActual?.estatura}" required placeholder="Ej: 175">
                    <small class="text-muted">Ingrese su estatura en centímetros.</small>
                    <div class="invalid-feedback">Este campo es obligatorio.</div>
                </div>
                <div class="col-md-4">
                    <div id="imcBox" class="imc-box">IMC: <span id="imcValue">--</span></div>
                    <small class="text-muted">El IMC se calcula automáticamente.</small>
                </div>
                <div class="col-md-4">
                    <label for="nivelExperiencia" class="form-label">Nivel de experiencia</label>
                    <select class="form-select" id="nivelExperiencia" name="nivelExperiencia" required>
                        <option value="">Seleccione...</option>
                        <option th:selected="${diagnosticoActual?.nivelExperiencia == 'PRINCIPIANTE'}" value="PRINCIPIANTE">Principiante</option>
                        <option th:selected="${diagnosticoActual?.nivelExperiencia == 'INTERMEDIO'}" value="INTERMEDIO">Intermedio</option>
                        <option th:selected="${diagnosticoActual?.nivelExperiencia == 'AVANZADO'}" value="AVANZADO">Avanzado</option>
                    </select>
                    <small class="text-muted">Seleccione su nivel de experiencia física.</small>
                    <div class="invalid-feedback">Este campo es obligatorio.</div>
                </div>
                <div class="col-md-4">
                    <label for="disponibilidadTiempo" class="form-label">Disponibilidad de tiempo</label>
                    <input type="text" class="form-control" id="disponibilidadTiempo" name="disponibilidadTiempo" th:value="${diagnosticoActual?.disponibilidadTiempo}" required placeholder="Ej: 3 veces por semana, 45 min">
                    <small class="text-muted">Ejemplo: 3 veces por semana, 45 min.</small>
                    <div class="invalid-feedback">Este campo es obligatorio.</div>
                </div>
                <div class="col-md-4">
                    <label for="accesoRecursos" class="form-label">Acceso a recursos</label>
                    <input type="text" class="form-control" id="accesoRecursos" name="accesoRecursos" th:value="${diagnosticoActual?.accesoRecursos}" required placeholder="Ej: casa, gimnasio, pesas">
                    <small class="text-muted">Ejemplo: casa, gimnasio, pesas.</small>
                    <div class="invalid-feedback">Este campo es obligatorio.</div>
                </div>
                <div class="col-md-4">
                    <label for="lesiones" class="form-label">Lesiones</label>
                    <input type="text" class="form-control" id="lesiones" name="lesiones" th:value="${diagnosticoActual?.lesiones}" required placeholder="Ej: ninguna, rodilla, espalda">
                    <small class="text-muted">Indique si tiene alguna lesión relevante.</small>
                    <div class="invalid-feedback">Este campo es obligatorio.</div>
                </div>
                <div class="col-md-4">
                    <label for="condicionesMedicas" class="form-label">Condiciones médicas</label>
                    <input type="text" class="form-control" id="condicionesMedicas" name="condicionesMedicas" th:value="${diagnosticoActual?.condicionesMedicas}" required placeholder="Ej: hipertensión, diabetes">
                    <small class="text-muted">Indique si tiene alguna condición médica relevante.</small>
                    <div class="invalid-feedback">Este campo es obligatorio.</div>
                </div>
                 <div class="col-md-4">
                    <label for="horasSueno" class="form-label">Horas de sueño</label>
                    <input type="number" step="0.1" min="0" max="24" class="form-control" id="horasSueno" name="horasSueno" th:value="${diagnosticoActual?.horasSueno}" required placeholder="Ej: 8">
                    <small class="text-muted">Ingrese el promedio de horas de sueño diarias.</small>
                    <div class="invalid-feedback">Este campo es obligatorio.</div>
                </div>
                <div class="col-md-4">
                    <label for="habitosAlimenticios" class="form-label">Hábitos Alimenticios</label>
                    <input type="text" class="form-control" id="habitosAlimenticios" name="habitosAlimenticios" th:value="${diagnosticoActual?.habitosAlimenticios}" required placeholder="Ej: dieta balanceada, vegetariano">
                    <small class="text-muted">Describa brevemente su alimentación.</small>
                    <div class="invalid-feedback">Este campo es obligatorio.</div>
                </div>
            </div>
        </div>
        <!-- Opcionales -->
        <div class="categoria">
            <div class="categoria-titulo">Datos adicionales <span class="badge bg-info">Opcional</span></div>
            <div class="row g-3">
                <div class="col-md-4">
                    <label for="fotoFrontalUrl" class="form-label">Foto Frontal (URL)</label>
                    <input type="text" class="form-control" id="fotoFrontalUrl" name="fotoFrontalUrl" th:value="${diagnosticoActual?.fotoFrontalUrl}" placeholder="Ej: https://...">
                    <small class="text-muted">URL de una foto frontal actual.</small>
                </div>
                <div class="col-md-4">
                    <label for="fotoLateralUrl" class="form-label">Foto Lateral (URL)</label>
                    <input type="text" class="form-control" id="fotoLateralUrl" name="fotoLateralUrl" th:value="${diagnosticoActual?.fotoLateralUrl}" placeholder="Ej: https://...">
                    <small class="text-muted">URL de una foto lateral actual.</small>
                </div>
                <div class="col-md-4">
                    <label for="fotoTraseraUrl" class="form-label">Foto Trasera (URL)</label>
                    <input type="text" class="form-control" id="fotoTraseraUrl" name="fotoTraseraUrl" th:value="${diagnosticoActual?.fotoTraseraUrl}" placeholder="Ej: https://...">
                    <small class="text-muted">URL de una foto trasera actual.</small>
                </div>
                <div class="col-md-4">
                    <label for="porcentajeGrasaCorporal" class="form-label">% Grasa Corporal</label>
                    <input type="number" step="0.1" min="0" max="100" class="form-control" id="porcentajeGrasaCorporal" name="porcentajeGrasaCorporal" th:value="${diagnosticoActual?.porcentajeGrasaCorporal}" placeholder="Ej: 18.5">
                    <small class="text-muted">Porcentaje estimado de grasa corporal.</small>
                </div>
                <div class="col-md-4">
                    <label for="circunferenciaCintura" class="form-label">Circunferencia Cintura (cm)</label>
                    <input type="number" step="0.1" min="0" class="form-control" id="circunferenciaCintura" name="circunferenciaCintura" th:value="${diagnosticoActual?.circunferenciaCintura}" placeholder="Ej: 80">
                    <small class="text-muted">Medida de la cintura en centímetros.</small>
                </div>
                <div class="col-md-4">
                    <label for="circunferenciaCadera" class="form-label">Circunferencia Cadera (cm)</label>
                    <input type="number" step="0.1" min="0" class="form-control" id="circunferenciaCadera" name="circunferenciaCadera" th:value="${diagnosticoActual?.circunferenciaCadera}" placeholder="Ej: 95">
                    <small class="text-muted">Medida de la cadera en centímetros.</small>
                </div>
                <div class="col-md-4">
                    <label for="circunferenciaBrazo" class="form-label">Circunferencia Brazo (cm)</label>
                    <input type="number" step="0.1" min="0" class="form-control" id="circunferenciaBrazo" name="circunferenciaBrazo" th:value="${diagnosticoActual?.circunferenciaBrazo}" placeholder="Ej: 32">
                    <small class="text-muted">Medida del brazo en centímetros.</small>
                </div>
                <div class="col-md-4">
                    <label for="circunferenciaPierna" class="form-label">Circunferencia Pierna (cm)</label>
                    <input type="number" step="0.1" min="0" class="form-control" id="circunferenciaPierna" name="circunferenciaPierna" th:value="${diagnosticoActual?.circunferenciaPierna}" placeholder="Ej: 40">
                    <small class="text-muted">Medida de la pierna en centímetros.</small>
                </div>
                <div class="col-md-4">
                    <label for="frecuenciaCardiacaReposo" class="form-label">Frecuencia Cardíaca Reposo (bpm)</label>
                    <input type="number" min="30" max="200" class="form-control" id="frecuenciaCardiacaReposo" name="frecuenciaCardiacaReposo" th:value="${diagnosticoActual?.frecuenciaCardiacaReposo}" placeholder="Ej: 70">
                    <small class="text-muted">Latidos por minuto en reposo.</small>
                </div>
                <div class="col-md-4">
                    <label for="presionArterial" class="form-label">Presión Arterial</label>
                    <input type="text" class="form-control" id="presionArterial" name="presionArterial" th:value="${diagnosticoActual?.presionArterial}" placeholder="Ej: 120/80">
                    <small class="text-muted">Ejemplo: 120/80.</small>
                </div>
                <div class="col-md-4">
                    <label for="horasSueno" class="form-label">Horas de Sueño</label>
                    <input type="number" min="0" max="24" class="form-control" id="horasSueno" name="horasSueno" th:value="${diagnosticoActual?.horasSueno}" placeholder="Ej: 7">
                    <small class="text-muted">Promedio de horas de sueño por día.</small>
                </div>
                <div class="col-md-4">
                    <label for="habitosAlimenticios" class="form-label">Hábitos Alimenticios</label>
                    <input type="text" class="form-control" id="habitosAlimenticios" name="habitosAlimenticios" th:value="${diagnosticoActual?.habitosAlimenticios}" placeholder="Ej: dieta balanceada, vegetariano">
                    <small class="text-muted">Descripción libre de sus hábitos alimenticios.</small>
                </div>
            </div>
        </div>
        <div class="col-12 text-end">
            <button type="submit" class="btn btn-primary">Guardar diagnóstico</button>
        </div>
    </form>
</div>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<script th:src="@{/js/diagnostico-form.js}"></script>
</section>
</body>
</html>
